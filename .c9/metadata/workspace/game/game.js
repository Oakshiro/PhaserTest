{"changed":true,"filter":false,"title":"game.js","tooltip":"/game/game.js","value":"\nvar game = new Phaser.Game(800, 600, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update, render: render });\n\nfunction preload() {\n\n    game.time.advancedTiming = true; //for FPS\n    game.load.image('barrel', 'assets/sprites/barrel.png');\n    game.load.image('chunk', 'assets/sprites/chunk.png');\n    game.load.image('bullets', 'assets/sprites/arrow.png');\n\n}\n\nvar cannon;\nvar bullets;\nvar angle = 0;\nvar fireRate = 100;\nvar nextFire = 0;\n\nfunction create() {\n\n    game.stage.backgroundColor = '#2d2d2d';\n\n    game.physics.startSystem(Phaser.Physics.P2JS);\n\n    game.physics.p2.gravity.y = 170;\n    game.physics.p2.restitution = 0.8;\n    game.physics.p2.friction = 0.1;\n\n    bullets = game.add.group();\n    bullets.createMultiple(500, 'bullets', 0, false);\n\n    cannon = game.add.sprite(50, 500, 'barrel');\n    cannon.anchor.set(0, 0.5);\n\n}\n\nfunction fire() {\n\n    if (game.time.now > nextFire)\n    {\n        nextFire = game.time.now + fireRate;\n\n    \tvar bullet = bullets.getFirstExists(false);\n\n        if (bullet)\n        {\n            bullet.frame = game.rnd.integerInRange(0, 6);\n            bullet.exists = true;\n            bullet.position.set(cannon.x, cannon.y);\n\n            game.physics.p2.enable(bullet);\n\n            bullet.body.rotation = cannon.rotation + game.math.degToRad(-90);\n\n            var magnitude = 500;\n            var angle = bullet.body.rotation + Math.PI / 2;\n\n            bullet.body.velocity.x = magnitude * Math.cos(angle);\n            bullet.body.velocity.y = magnitude * Math.sin(angle);\n        }\n    }\n\n}\n\nfunction update() {\n\n    var dx = game.input.activePointer.worldX - cannon.x;\n    var dy = game.input.activePointer.worldY - cannon.y;\n    cannon.rotation = Math.atan2(dy, dx);\n\n    if (game.input.activePointer.isDown)\n    {\n        fire();\n    }\n\n}\n\nfunction render() \n{\n    game.debug.text(game.time.fps || '--', 2, 14, \"#00ff00\");   \n}\n","undoManager":{"mark":88,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":51,"column":50},"end":{"row":51,"column":51}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":48},"end":{"row":31,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":31,"column":0},"end":{"row":31,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":4},"end":{"row":31,"column":5}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":5},"end":{"row":31,"column":6}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":6},"end":{"row":31,"column":7}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":7},"end":{"row":31,"column":8}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":8},"end":{"row":31,"column":9}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":9},"end":{"row":31,"column":10}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":10},"end":{"row":31,"column":11}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":11},"end":{"row":31,"column":12}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":12},"end":{"row":31,"column":13}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":13},"end":{"row":31,"column":14}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":14},"end":{"row":31,"column":15}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":15},"end":{"row":31,"column":16}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":16},"end":{"row":31,"column":17}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":17},"end":{"row":31,"column":18}},"text":"="}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":18},"end":{"row":31,"column":19}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":19},"end":{"row":31,"column":20}},"text":"4"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":20},"end":{"row":31,"column":21}},"text":"5"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":21},"end":{"row":31,"column":22}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":31,"column":11},"end":{"row":31,"column":16}},"text":"angle"},{"action":"insertText","range":{"start":{"row":31,"column":11},"end":{"row":31,"column":12}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":12},"end":{"row":31,"column":13}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":13},"end":{"row":31,"column":14}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":14},"end":{"row":31,"column":15}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":15},"end":{"row":31,"column":16}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":16},"end":{"row":31,"column":17}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":17},"end":{"row":31,"column":18}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":18},"end":{"row":31,"column":19}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":31,"column":0},"end":{"row":31,"column":25}},"text":"    cannon.rotation = 45;"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":31,"column":0},"end":{"row":32,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":40},"end":{"row":67,"column":41}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":41},"end":{"row":67,"column":42}},"text":"+"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":42},"end":{"row":67,"column":43}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":43},"end":{"row":67,"column":44}},"text":"4"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":44},"end":{"row":67,"column":45}},"text":"5"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":45},"end":{"row":67,"column":46}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":46},"end":{"row":67,"column":47}},"text":"p"},{"action":"insertText","range":{"start":{"row":67,"column":47},"end":{"row":67,"column":48}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":46},"end":{"row":67,"column":47}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":41},"end":{"row":67,"column":47}},"text":"+ 45.0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":40},"end":{"row":67,"column":41}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":41},"end":{"row":68,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":68,"column":0},"end":{"row":68,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":4},"end":{"row":68,"column":5}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":5},"end":{"row":68,"column":6}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":6},"end":{"row":68,"column":7}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":7},"end":{"row":68,"column":8}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":8},"end":{"row":68,"column":9}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":9},"end":{"row":68,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":68,"column":9},"end":{"row":68,"column":10}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":9},"end":{"row":68,"column":10}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":10},"end":{"row":68,"column":11}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":11},"end":{"row":68,"column":12}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":12},"end":{"row":68,"column":13}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":13},"end":{"row":68,"column":14}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":14},"end":{"row":68,"column":15}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":15},"end":{"row":68,"column":16}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":16},"end":{"row":68,"column":17}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":17},"end":{"row":68,"column":18}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":18},"end":{"row":68,"column":19}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":19},"end":{"row":68,"column":20}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":68,"column":4},"end":{"row":68,"column":20}},"text":"cannon.rotation "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":68,"column":0},"end":{"row":68,"column":4}},"text":"    "},{"action":"removeText","range":{"start":{"row":67,"column":41},"end":{"row":68,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":41},"end":{"row":68,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":68,"column":0},"end":{"row":68,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":68,"column":4},"end":{"row":68,"column":37}},"text":"bullet.rotation += Math.PI * 0.5;"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":68,"column":4},"end":{"row":68,"column":10}},"text":"bullet"},{"action":"insertText","range":{"start":{"row":68,"column":4},"end":{"row":68,"column":10}},"text":"cannon"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":68,"column":0},"end":{"row":68,"column":37}},"text":"    cannon.rotation += Math.PI * 0.5;"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":68,"column":0},"end":{"row":69,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":0},"end":{"row":5,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":0},"end":{"row":5,"column":32}},"text":"game.time.advancedTiming = true;"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":0},"end":{"row":5,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":36},"end":{"row":5,"column":37}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":37},"end":{"row":5,"column":38}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":38},"end":{"row":5,"column":39}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":39},"end":{"row":5,"column":40}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":40},"end":{"row":5,"column":41}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":41},"end":{"row":5,"column":42}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":42},"end":{"row":5,"column":43}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":43},"end":{"row":5,"column":44}},"text":"F"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":44},"end":{"row":5,"column":45}},"text":"P"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":45},"end":{"row":5,"column":46}},"text":"S"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":77,"column":18},"end":{"row":78,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":78,"column":1},"end":{"row":79,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":79,"column":0},"end":{"row":79,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":4},"end":{"row":80,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":80,"column":0},"end":{"row":80,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":4},"end":{"row":80,"column":72}},"text":"        game.debug.text(game.time.fps || '--', 2, 14, \"#00ff00\");   "},{"action":"insertText","range":{"start":{"row":80,"column":72},"end":{"row":81,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":81,"column":0},"end":{"row":81,"column":87}},"text":"        game.debug.text(\"Tween running: \" + !this.idleBallTween.pendingDelete, 2, 110);"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":79,"column":0},"end":{"row":79,"column":4}},"text":"    "},{"action":"removeText","range":{"start":{"row":78,"column":1},"end":{"row":79,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":79,"column":1},"end":{"row":79,"column":12}},"text":"           "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":1},"end":{"row":79,"column":4}},"text":"   "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":80,"column":4},"end":{"row":80,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":80,"column":0},"end":{"row":81,"column":0}},"nl":"\n","lines":["    game.debug.text(\"Tween running: \" + !this.idleBallTween.pendingDelete, 2, 110);"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":79,"column":64},"end":{"row":80,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":43},"end":{"row":21,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":21,"column":0},"end":{"row":21,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":21,"column":4},"end":{"row":22,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":22,"column":0},"end":{"row":22,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":22,"column":4},"end":{"row":22,"column":5}},"text":"P"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":22,"column":5},"end":{"row":22,"column":6}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":22,"column":6},"end":{"row":22,"column":7}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":22,"column":7},"end":{"row":22,"column":8}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":22,"column":4},"end":{"row":22,"column":8}},"text":"Phas"},{"action":"insertText","range":{"start":{"row":22,"column":4},"end":{"row":22,"column":10}},"text":"Phaser"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":22,"column":10},"end":{"row":22,"column":11}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":22,"column":0},"end":{"row":22,"column":11}},"text":"    Phaser."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":21,"column":4},"end":{"row":22,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":21,"column":0},"end":{"row":21,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":20,"column":43},"end":{"row":21,"column":0}},"text":"\n"}]}]]},"ace":{"folds":[],"customSyntax":"javascript","scrolltop":0,"scrollleft":0,"selection":{"start":{"row":12,"column":11},"end":{"row":12,"column":11},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1415116556000}