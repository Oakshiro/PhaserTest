{"changed":false,"filter":false,"title":"Game.js","tooltip":"/Game/Game.js","value":"\nvar game = new Phaser.Game(800, 600, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update, render: render });\n\nfunction preload() {\n\n    game.load.image('arrow', 'assets/sprites/arrow.png');\n    game.load.image('chunk', 'assets/sprites/chunk.png');\n    game.load.spritesheet('bullets', 'assets/sprites/balls.png', 17, 17);\n\n}\n\nvar cannon;\nvar bullets;\nvar angle = 0;\nvar fireRate = 100;\nvar nextFire = 0;\n\nfunction create() {\n\n    game.stage.backgroundColor = '#2d2d2d';\n\n    game.physics.startSystem(Phaser.Physics.P2JS);\n\n    game.physics.p2.gravity.y = 170;\n    game.physics.p2.restitution = 0.8;\n    game.physics.p2.friction = 0.1;\n\n    bullets = game.add.group();\n    bullets.createMultiple(500, 'bullets', 0, false);\n\n    cannon = game.add.sprite(50, 500, 'arrow');\n    cannon.anchor.set(0, 0.5);\n\n}\n\nfunction fire() {\n\n    if (game.time.now > nextFire)\n    {\n        nextFire = game.time.now + fireRate;\n\n    \tvar bullet = bullets.getFirstExists(false);\n\n        if (bullet)\n        {\n            bullet.frame = game.rnd.integerInRange(0, 6);\n            bullet.exists = true;\n            bullet.position.set(cannon.x, cannon.y);\n\n            game.physics.p2.enable(bullet);\n\n            bullet.body.rotation = cannon.rotation + game.math.degToRad(-90);\n\n            var magnitude = 500;\n            var angle = bullet.body.rotation + Math.PI / 2;\n\n            bullet.body.velocity.x = magnitude * Math.cos(angle);\n            bullet.body.velocity.y = magnitude * Math.sin(angle);\n        }\n    }\n\n}\n\nfunction update() {\n\n    var dx = game.input.activePointer.worldX - cannon.x;\n    var dy = game.input.activePointer.worldY - cannon.y;\n    cannon.rotation = Math.atan2(dy, dx);\n\n    if (game.input.activePointer.isDown)\n    {\n        fire();\n    }\n\n}\n\nfunction render() {\n\n}\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":10,"column":0},"end":{"row":10,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1415101232342}